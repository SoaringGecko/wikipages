<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <title>Video Game Wiki Pages</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<body onload="testQuery();">
    <p style="width:100%;display:block"><a href="https://google.com/" style="color:#ffa600">Google</a></p>
    <p style="width:100%;display:block"><a href="template/" style="color:#ffa600">Add a wiki</a></p>
    </br>
    <form action="">
        <input type="search" name="s" value="" id="searchInput" placeholder="search wikis">
        <button type="submit" style="margin-left: -6px;">Search</button> <label for="sepMod" onselectstart="return false" ondragstart="return false">Mods don&apos;t display separately</label><input type="checkbox" value="off" name="sepMod" id="sepMod">
    </form>
    </br>
    <div class="options">
        <div class="box">
            <desc>terraria,</desc>
            <a href="https://terraria.wiki.gg"><img src="img/terrariaLogo.png" alt=""></a>
            <p><a href="https://terraria.wiki.gg/wiki/Guide:Class_setups">Class Setup</a></p>
            <form method="get" action="https://terraria.wiki.gg/index.php">
                <input type="search" name="search" id="wikiSearch">
            </form>
            <div class="mods">
                <p class="mods-text" onclick="toggleMods('terraria')" onselectstart="return false" ondragstart="return false">Mods <span class="terraria mods-arrow">▲</span></p>
                <div class="mods-content" id="terraria">
                    <div class="mods-box">
                        <desc>calamity mod, calamitymod,</desc>
                        <a href="https://calamitymod.wiki.gg/wiki/Calamity_Mod_Wiki"><img src="img/calamityLogo.png" alt=""></a>
                        <p><a href="https://calamitymod.wiki.gg/wiki/Guide:Class_setups">Class Setup</a></p>
                        <form method="get" action="https://calamitymod.wiki.gg/index.php">
                            <input type="search" name="search" id="wikiSearch">
                        </form>
                        <div class="mods">
                            <p class="mods-text" onclick="toggleMods('calamityMod')" onselectstart="return false" ondragstart="return false">Mods <span class="calamityMod mods-arrow">▲</span></p>
                            <div class="mods-content" id="calamityMod">
                                <div class="mods-box">
                                    <desc>Infernum mod, InfernumMod,</desc>
                                    <a href="https://infernummod.wiki.gg/wiki/Infernum_Mod_Wiki"><img src="img/infernumLogo.png" alt=""></a>
                                    <form method="get" action="https://infernummod.wiki.gg/index.php">
                                        <input type="search" name="search" id="wikiSearch">
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mods-box">
                        <desc>thorium mod, thoriummod,</desc>
                        <a href="https://thoriummod.wiki.gg/wiki/Thorium_Mod_Wiki"><img src="img/thoriumLogo.png" alt=""></a>
                        <p><a href="https://thoriummod.wiki.gg/wiki/Guide:Class_setups">Class Setup</a></p>
                        <form method="get" action="https://thoriummod.wiki.gg/index.php">
                            <input type="search" name="search" id="wikiSearch">
                        </form>
                    </div>
                    <div class="mods-box">
                        <desc>spirit mod, spiritmod,</desc>
                        <a href="https://spiritmod.fandom.com/wiki/Spirit_Mod_Wiki"><img src="img/spiritLogo.jpg" width="486px" alt=""></a>
                        <p><a href="https://spiritmod.fandom.com/wiki/Guide:Class_Setups">Class Setup</a></p>
                        <form method="get" action="https://spiritmod.fandom.com/wiki/Special:Search">
                            <input type="search" name="search" id="wikiSearch">
                        </form>
                    </div>
                    <div class="mods-box">
                        <desc>split mod, splitmod,</desc>
                        <a href="https://splitmod.fandom.com/wiki/The_Split_Mod_Wiki"><img src="img/splitLogo.gif" width="486px" alt=""></a>
                        <form method="get" action="https://splitmod.fandom.com/wiki/Special:Search">
                            <input type="search" name="query" id="wikiSearch">
                        </form>
                    </div>
                    <div class="mods-box">
                        <desc>elements awoken, elementsawoken, mod,</desc>
                        <a href="https://elementsawoken.fandom.com/wiki/Elements_Awoken_Mod_Wiki"><img src="img/elementsAwokenLogo.png" width="486px" alt=""></a>
                        <form method="get" action="https://elementsawoken.fandom.com/wiki/Special:Search">
                            <input type="search" name="query" id="wikiSearch">
                        </form>
                    </div>
                    <div class="mods-box">
                        <desc>shadows of abaddon, shadows ofabaddon, shadowsof abaddon, mod,</desc>
                        <a href="https://shadowsofabaddon.miraheze.org/wiki/Shadows_of_Abaddon_Mod_Wiki"><img src="img/shadowsOfAbaddonLogo.png" width="486px" alt=""></a>
                        <p><a href="https://shadowsofabaddon.miraheze.org/wiki/Guide:Class_setups">Class Setup</a></p>
                        <form method="get" action="https://shadowsofabaddon.miraheze.org/w/index.php">
                            <input type="search" name="search" id="wikiSearch">
                        </form>
                    </div>

                </div>
            </div>

        </div>

        <div class="box">
            <desc>stardew valley, stardewvalley,</desc>
            <a href="https://stardewvalleywiki.com/Stardew_Valley_Wiki"><img src="img/stardewValleyLogo.png" alt=""></a>
            <form method="get" action="https://stardewvalleywiki.com/mediawiki/index.php">
                <input type="search" name="search" id="wikiSearch">
            </form>
        </div>

        <div class="box">
            <desc>starbound, star Bound,</desc>
            <a href="https://starbounder.org/Starbound_Wiki"><img src="img/starboundLogo.png" width="486px" alt=""></a>
            <form method="get" action="https://starbounder.org/mediawiki/index.php">
                <input type="search" name="search" id="wikiSearch">
            </form>
        </div>

        <div class="box">
            <desc>payday, pay day, payday2, payday 2, pay day 2, pay day2,</desc>
            <a href="https://payday.fandom.com/wiki/Payday_Wiki"><img src="img/payDayLogo.webp" width="486px" style="margin-top: 52px;" alt=""></a>
            <form method="get" action="https://payday.fandom.com/wiki/Special:Search">
                <input type="search" name="search" id="wikiSearch">
            </form>
        </div>

        <div class="box">
            <desc>noita,</desc>
            <a href="https://noita.fandom.com/wiki/Noita_Wiki"><img src="img/noitaLogo.png" alt=""></a>
            <form method="get" action="https://noita.fandom.com/wiki/Special:Search">
                <input type="search" name="search" id="wikiSearch">
            </form>
        </div>

        <div class="box">
            <desc>DeepRockGalactic, Deep RockGalactic, DeepRockGalactic, DeepRock Galactic, Deep Rock Galactic,</desc>
            <a href="https://deeprockgalactic.wiki.gg/wiki/Deep_Rock_Galactic_Wiki"><img src="img/deepRockGalacticLogo.png" alt=""></a>
            <form method="get" action="https://deeprockgalactic.wiki.gg/index.php">
                <input type="search" name="search" id="wikiSearch">
            </form>
        </div>

        <div class="box">
            <desc>deadcells, dead cells,</desc>
            <a href="https://deadcells.wiki.gg/wiki/Dead_Cells_Wiki"><img src="img/deadCellsLogo.webp" width="486px" alt=""></a>
            <form method="get" action="https://deadcells.wiki.gg/index.php">
                <input type="search" name="search" id="wikiSearch">
            </form>
        </div>

        <div class="box">
            <desc>Risk Of Rain 2, RiskOf Rain 2, Risk OfRain 2, Risk OfRain2, RiskOfRain 2, RiskOfRain2, RiskOf Rain2, Risk Of Rain Two, RiskOf Rain Two, Risk OfRain Two, Risk OfRainTwo, RiskOfRain Two, RiskOfRainTwo, RiskOf RainTwo,</desc>
            <a href="https://riskofrain2.fandom.com/wiki/Risk_of_Rain_2_Wiki"><img src="img/riskOfRain2Logo.webp" alt=""></a>
            <form method="get" action="https://riskofrain2.fandom.com/wiki/Special:Search">
                <input type="search" name="search" id="wikiSearch">
            </form>
        </div>

        <div class="box">
            <desc>Muse Dash, MuseDash,</desc>
            <a href="https://musedash.fandom.com/wiki/Muse_Dash_Wiki"><img src="img/museDashLogo.webp" alt=""></a>
            <p><a href="https://docs.google.com/spreadsheets/d/1yaflVxwsjVNlX10NFebplvsjluQg7FlF2t1fMJh0qwE/edit?pli=1#gid=477798788">Muse Dash Illustration Unlock Guide</a></p>
            <p><a href="https://docs.google.com/document/d/1YVXdhRWRklOsvWNEXzAWPIaGpv4s4xLO9hOkZrk7auo/edit">Muse Dash Scoring Compendium & Guide</a></p>
            <form method="get" action="https://musedash.fandom.com/wiki/Special:Search">
                <input type="search" name="search" id="wikiSearch">
            </form>
        </div>

        <div class="box">
            <desc>warframe, war frame,</desc>
            <a href="https://warframe.fandom.com/wiki/WARFRAME_Wiki"><img src="img/warframeLogo.png" style="filter:invert(1);" width="486px" alt=""></a>
            <form method="get" action="https://warframe.fandom.com/wiki/Special:Search">
                <input type="search" name="search" id="wikiSearch">
            </form>
        </div>
    </div>


    <script>
        x = "hello";
        queryResult = 1;
        sepMod = "on";
        arr = [];
        var maxMistakes = 2;
        const htmlElements = document.getElementsByTagName("desc");

        function toggleMods(e) {
            x = document.getElementById(e);
            x.classList.toggle("l");
            x = document.getElementsByClassName(e, "mods-arrow");
            x[0].classList.toggle("l");
        }

        function testQuery() {
            console.log(htmlElements);
            queryResult = window.location.search.substring(3).replace(/\+/g, ' ');
            sepMod = queryResult.split(/(.*)(&sepMod=(.*))/g);
            sepMod[3] == "off" ? document.getElementById("sepMod").checked = true : document.getElementById("sepMod").checked = false;
            queryResult = queryResult.replace(/&sepMod=.*/g, '');
            document.getElementById("searchInput").value = queryResult;
            if (queryResult == "") {
                return false;
            }
            $(".box").css("display", "none");


            function search(query) {
                const regex = new RegExp(query, 'i');
                const elements = document.getElementsByTagName('desc');
                const results = Array.from(elements).filter(element => regex.test(element.textContent));
                return results;
            }

            const searchResults = search(queryResult);

            searchResults.forEach(result => {
                // Do something with each matching element
                console.log(result.textContent);
                console.log(result.parentElement.id);
                if (result.parentElement.parentElement.className == "mods-content") {
                    if (sepMod[3] == "off") {
                        result.parentElement.parentElement.parentElement.parentElement.style.display = "inline-table"
                    } else {
                        console.log(result.parentElement);
                        result.parentElement.classList.remove("mods-box");
                        result.parentElement.classList.add("box");
                        result.parentElement.style.display = "inline-table";
                        console.log(result.parentElement.parentElement.childElementCount == 1);
                        if (result.parentElement.parentElement.childElementCount == 1) {
                            result.parentElement.parentElement.parentElement.style.display = "none";
                        }
                        if (result.parentElement.parentElement.parentElement.parentElement.className == 'mods-box') {
                            result.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.after(result.parentElement);
                            for (let lnx = 0; lnx < document.getElementsByClassName('mods-content').length; lnx++) {
                                if (document.getElementsByClassName('mods-content')[lnx].innerHTML.match(/(?<!\S)\s*(?!\S)/y)) {
                                    document.getElementsByClassName('mods-content')[lnx].parentElement.style.display = "none"

                                }
                            }
                        }
                        result.parentElement.parentElement.parentElement.parentElement.after(result.parentElement)
                            //result.parentElement.parentElement.parentElement.parentElement.style.display = "inline-table"
                    }
                } else {
                    result.parentElement.style.display = "inline-table"
                }
            });

            /*for (let i = 0; i < htmlElements.length; i++) {
                console.log(arr); // true or false
                if (arr) {
                    htmlElements[i].parentElement.style.display = "block"
                }
            }
            

            exp = `contains(. = "${queryResult}")]`
            var headings = document.evaluate(exp, document, null, XPathResult.ANY_TYPE);

            while (thisHeading = headings.iterateNext()) {
                console.log(thisHeading);
                $(thisHeading).parent().css("display", "block");
            }*/
        }
    </script>

</body>

</html>
